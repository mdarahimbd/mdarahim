<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Memory Archives</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
     <link id='profile' rel="shortcut icon" href="personal.jpg" type="image/x-png">
    <style>
        body {
            margin: 0; padding: 0;
            background-color: #050505;
            height: 100vh; width: 100vw;
            overflow: hidden;
            font-family: 'Orbitron', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        /* Animated Grid Background */
        .grid-bg {
            position: absolute; inset: 0;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -2;
            opacity: 0.3;
        }

        .photo-frame {
            position: relative;
            width: 90vw; /* Fits mobile width */
            height: 85vh; /* Fits mobile height */
            border: 1px solid rgba(0, 255, 255, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 20, 20, 0.4);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
        }

        /* CORNERS */
        .corner {
            position: absolute; width: 20px; height: 20px;
            border-color: #00ffff; border-style: solid;
        }
        .tl { top: -1px; left: -1px; border-width: 2px 0 0 2px; }
        .tr { top: -1px; right: -1px; border-width: 2px 2px 0 0; }
        .bl { bottom: -1px; left: -1px; border-width: 0 0 2px 2px; }
        .br { bottom: -1px; right: -1px; border-width: 0 2px 2px 0; }

        /* IMAGE STYLES */
        #memory-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* Shows full image without cropping */
            opacity: 0; /* Hidden until loaded */
        }

        /* TEXT INFO */
        .hud-info {
            position: absolute; bottom: 20px; left: 20px;
            color: #00ffff; pointer-events: none;
        }
        .hud-counter { font-size: 20px; font-weight: bold; }
        .click-hint {
            position: absolute; bottom: 20px; right: 20px;
            color: white; font-size: 10px; opacity: 0.5;
            animation: blink 2s infinite;
        }

        @keyframes blink { 0%, 100% {opacity: 1;} 50% {opacity: 0.3;} }
        
        /* ERROR MESSAGE STYLE */
        #error-msg {
            position: absolute; color: red; font-family: monospace;
            background: rgba(0,0,0,0.8); padding: 10px; display: none; z-index: 100;
        }
    </style>
</head>
<body>

    <div class="grid-bg"></div>
    <div id="error-msg"></div>

    <div class="photo-frame">
        <div class="corner tl"></div><div class="corner tr"></div>
        <div class="corner bl"></div><div class="corner br"></div>

        <!-- The Image -->
        <img id="memory-img" src="" alt="Memory">

        <div class="hud-info">
            <div class="hud-counter" id="counter">INITIALIZING...</div>
        </div>
        <div class="click-hint">AUTO-PLAYING...</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        // --- SETTINGS ---
        const totalImages = 21; 
        const folder = "assets/memories/"; // Folder Name
        const extension = ".jpg";   // File Extension
        const displayTime = 2000;   // 2000ms = 2 Seconds
        
        let currentIndex = 1;
        let isAnimating = false;
        let autoPlayTimer;

        const img = document.getElementById('memory-img');
        const counter = document.getElementById('counter');
        const errorMsg = document.getElementById('error-msg');

        // --- STARTUP ---
        window.onload = () => {
            loadPhoto(currentIndex);
            startTimer();
        };

        // --- CLICK EVENT (Manual Change) ---
        document.body.addEventListener('click', () => {
            // Reset the auto-timer so it doesn't change immediately after you click
            clearInterval(autoPlayTimer);
            goToNextSlide();
            startTimer();
        });

        // --- CHANGE SLIDE LOGIC ---
        function goToNextSlide() {
            if (isAnimating) return;
            
            currentIndex++;
            if (currentIndex > totalImages) currentIndex = 1;

            // ANIMATION OUT (Futuristic Zoom & Blur)
            isAnimating = true;
            gsap.to(img, { 
                opacity: 0, 
                scale: 2, 
                filter: "blur(20px)", 
                duration: 0.5,
                ease: "power2.in", 
                onComplete: () => loadPhoto(currentIndex) 
            });
        }

        // --- LOAD PHOTO ---
        function loadPhoto(index) {
            errorMsg.style.display = 'none';
            
            // Construct Path
            const newPath = `${folder}child${index}${extension}`;
            
            // Assign Source
            img.src = newPath;
            
            // Update Text
            let num = index < 10 ? `0${index}` : index;
            counter.innerText = `MEMORY: ${num} / ${totalImages}`;
        }

        // --- IMAGE LOADED (Animation IN) ---
        img.onload = () => {
            // ANIMATION IN (Materialize from center)
            gsap.fromTo(img, 
                { scale: 0.5, opacity: 0, filter: "blur(10px) brightness(2)" },
                { 
                    scale: 1, 
                    opacity: 1, 
                    filter: "blur(0px) brightness(1)", 
                    duration: 0.8, 
                    ease: "elastic.out(1, 0.7)",
                    onComplete: () => {
                        isAnimating = false;
                    }
                }
            );
        };

        // --- ERROR HANDLING ---
        img.onerror = () => {
            errorMsg.style.display = 'block';
            errorMsg.innerText = `ERROR: Missing ${img.src}`;
            isAnimating = false;
        };

        // --- AUTO PLAY TIMER ---
        function startTimer() {
            autoPlayTimer = setInterval(() => {
                if(!isAnimating) {
                    goToNextSlide();
                }
            }, displayTime);
        }
    </script>
</body>
</html>